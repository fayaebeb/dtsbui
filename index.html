<!DOCTYPE html>
<html lang="ja">

<head>
	<title>【入力】デジタルツインサンドボックス</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="assets/js/leaflet/leaflet.css" />
	<link rel="stylesheet" href="assets/css/common.css" />
	<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@500;700&display=swap" rel="stylesheet">
	<link
		href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Poppins:wght@600;700&display=swap"
		rel="stylesheet">

	<style>
		.dtsb-toolbar {
			display: flex;
			gap: 12px;
			align-items: center;
			flex-wrap: wrap;
			padding: 8px 0;
		}

		.legend {
			display: flex;
			gap: 10px;
			align-items: center;
			font-size: 12px;
		}

		.legend .dot {
			width: 10px;
			height: 10px;
			border-radius: 50%;
			display: inline-block;
		}

		.status {
			font-size: 13px;
			color: #333;
			margin-left: auto;
		}

		.panel {
			display: flex;
			gap: 16px;
			padding: 10px;
			border: 1px solid #eee;
			border-radius: 10px;
			background: #fafafa;
			flex-wrap: wrap;
			margin-top: 10px;
		}

		.card {
			border: 1px solid #e5e5e5;
			border-radius: 10px;
			padding: 10px;
			background: #fff;
			min-width: 260px;
		}

		.card h3 {
			margin: 0 0 8px;
			font-size: 14px;
		}

		.weights-grid {
			display: grid;
			grid-template-columns: 1fr 90px;
			gap: 6px 10px;
			align-items: center;
		}

		.weights-grid label {
			font-size: 12px;
			color: #444;
		}

		.weights-grid input {
			width: 90px;
			padding: 4px;
			font-size: 12px;
		}

		.btn {
			cursor: pointer;
			background: #31599E;
			color: #fff;
			border: none;
			border-radius: 8px;
			padding: 8px 12px;
			font-weight: 600;
		}

		.btn.secondary {
			background: #666;
		}

		.btn.ghost {
			background: #f3f6ff;
			color: #31599E;
		}

		.muted {
			color: #666;
			font-size: 12px;
		}

		.table-wrap {
			max-height: 26vh;
			overflow: auto;
			border: 1px solid #eee;
			border-radius: 10px;
			background: #fff;
		}

		table {
			border-collapse: collapse;
			width: 100%;
		}

		th,
		td {
			border-bottom: 1px solid #eee;
			padding: 6px 8px;
			font-size: 12px;
			text-align: left;
		}

		th {
			background: #f7f7f7;
			position: sticky;
			top: 0;
			z-index: 1;
		}

		.badge {
			display: inline-block;
			padding: 2px 6px;
			border-radius: 999px;
			font-size: 11px;
			background: #e9efff;
			color: #31599E;
		}

		#map {
			width: 100%;
			height: 65vh;
		}

		/* collapsible (unchanged) */
		.collapsible {
			overflow: hidden;
			max-height: 0;
			opacity: 0;
			transition: max-height .35s ease, opacity .25s ease;
			will-change: max-height, opacity;
		}

		.collapsible.open {
			opacity: 1;
		}

		.collapsible.scroll {
			overflow-y: auto;
			-webkit-overflow-scrolling: touch;
		}
	</style>

	<style>
		details.c-route {
			max-height: 400px;
			overflow-y: auto;
			-ms-overflow-style: none;
			/* IE and Edge */
			scrollbar-width: none;
			/* Firefox */
		}

		details.c-route::-webkit-scrollbar {
			display: none;
			/* Chrome, Safari */
		}

		details.c-route>summary {
			position: sticky;
			top: 0;
			z-index: 10;
			background: #fff;
			padding: 12px 16px;
			border-bottom: 1px solid #ddd;
		}

		details.c-route>.c-route__setting {
			padding-top: 40px;
		}

		.c-area__btns {
			display: flex;
			justify-content: flex-end;
		}

		.c-btn.c-btn__contents {
			min-width: 400px;
		}

		#map {
			border-radius: 12px;
			overflow: hidden;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
		}

		.l-contents__map-data {
			border-radius: 12px;
		}

		.l-contents__map-legends {
			border-radius: 12px;

			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
		}

		.l-fixed__open.l-contents__useful.c-btn.js-fixed-open {
			padding: 16px 16px;
		}
	</style>

	<style>
		.c-input__range-wrap.dual {
			position: relative;
			height: 60px;
			margin-top: 10px;
		}

		.c-input__range-wrap.dual input[type=range] {
			position: absolute;
			width: 100%;
			height: 6px;
			margin: 0;
			-webkit-appearance: none;
			background: transparent;
			pointer-events: none;
			z-index: 1;
		}

		.c-input__range-wrap.dual input[type=range]#fareRangeMin {
			z-index: 1;
		}

		.c-input__range-wrap.dual input[type=range]#fareRangeMax {
			z-index: 2;
		}

		.c-input__range-wrap.dual input[type=range]::-webkit-slider-thumb {
			-webkit-appearance: none;
			pointer-events: all;
			width: 16px;
			height: 16px;
			background: #7e3ff2;
			border: 2px solid #fff;
			border-radius: 50%;
			box-shadow: 0 0 1px rgba(0, 0, 0, 0.4);
			cursor: pointer;
			margin-top: -5px;
		}

		.c-input__range-wrap.dual input[type=range]::-moz-range-thumb {
			pointer-events: all;
			width: 16px;
			height: 16px;
			background: #933df5;
			border: 2px solid #fff;
			border-radius: 50%;
			cursor: pointer;
		}

		.c-input__range-wrap.dual input[type=range]::-webkit-slider-runnable-track {
			height: 6px;
			background: #ccc;
			border-radius: 3px;
		}

		.c-input__range-wrap.dual .c-input__range-markforslider {
			position: absolute;
			top: 50%;
			height: 6px;
			background: #933df5;
			border-radius: 3px;
			transform: translateY(-50%);
			z-index: 3;
			pointer-events: none;
		}


		.c-input__range-mark {
			position: absolute;
			top: 50%;
			width: 2px;
			height: 4px;
			transform: translateY(-50%);
			background: #666666;
		}

		.c-input__range-mark.equal {
			background: #fff;
		}

		.c-input__range-display {
			display: flex;
			align-items: baseline;
			gap: 4px;
			font-size: 1.1em;
			margin-bottom: 4px;
		}

		.c-input__range-display strong {
			font-weight: bold;
			font-size: 1.2em;
		}

		.c-input__range-separator {
			padding: 0 4px;
		}

		.c-input__range-unit {
			font-size: 0.9em;
			margin-left: 4px;
		}

		.c-input__range-diff {
			color: #888;
			margin-left: 8px;
			font-size: 0.85em;
		}

		.range-bubble {
			position: absolute;
			top: -30px;
			width: 65px;
			text-align: center;
			font-size: 1.4rem;
			padding: 2px 5px;
			background-color: #8d3dae;
			color: #fff;
			border-radius: 4px;
			transform: translateX(-50%);
			pointer-events: none;
			line-height: 1.2;
			display: block;
			font-weight: 500;
		}

		.range-bubble::after {
			content: "";
			position: absolute;
			bottom: -6px;
			left: 50%;
			transform: translateX(-50%);
			border-width: 6px 6px 0 6px;
			border-style: solid;
			border-color: #8d3dae transparent transparent transparent;
			display: block;
			font-weight: 500;
		}

		.c-input__range-wrap input[type=range]::-webkit-slider-runnable-track {
			height: 12px;
			background: #ccc;
			border-radius: 6px;
		}

		.c-input__range-wrap input[type=range]::-moz-range-track {
			height: 12px;
			background: #ccc;
			border-radius: 6px;
		}

		.c-input__range-wrap input[type=range]::-webkit-slider-thumb {
			-webkit-appearance: none;
			pointer-events: all;
			width: 22px;
			height: 15px;
			background: #7e3ff2;
			border: none;
			border-radius: 2px;
			cursor: pointer;
			margin-top: -3px;
		}

		.c-input__range-wrap input[type=range]::-moz-range-thumb {
			pointer-events: all;
			width: 4px;
			height: 24px;
			background: #7e3ff2;
			border: none;
			border-radius: 2px;
			cursor: pointer;
		}

		.c-input__range-mark.js-range-mark {
			height: 12px;
			background: rgba(126, 63, 242, 0.4);
			border-radius: 6px;
			top: 50%;
			transform: translateY(-50%);
		}

		.range-fixed-bubble {
			background: #eee;
			display: block;
			padding: 0.2857142857em 0.7857142857em;
			border-radius: var(--commonRadius);
			width: fit-content;
			font-size: 1.4rem;
			transform: translateX(-50%);
			position: absolute;
			bottom: -14px;
		}

		.range-fixed-bubble::after {
			content: "";
			position: absolute;
			top: -6px;
			left: 50%;
			transform: translateX(-50%);
			border-width: 0 6px 6px 6px;
			border-style: solid;
			border-color: transparent transparent #aaa transparent;
			display: none;
		}
	</style>

	<style>
		.mesh-label {
			pointer-events: none;
			text-align: center;
		}

		.mesh-label div {
			background: rgba(255, 255, 255, 0.8);
			border: 1px solid rgba(0, 0, 0, 0.15);
			border-radius: 2px;
			padding: 0px 1px;
			font-size: 11px;
			font-weight: bold;
			color: #333;
			box-shadow: none;
			white-space: nowrap;
			line-height: 1;
			margin: 0;
			display: inline-block;
		}
	</style>

	<style>
		/* Menu panel */
		.landuse-panel {
			display: none;
			position: absolute;
			top: 100px;
			left: 10px;
			min-width: 220px;
			background: #fff;
			border-radius: 8px;
			border: 1px solid #ccc;
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);
			padding: 16px;
			z-index: 9999;
			font-family: 'Segoe UI', sans-serif;
			transition: opacity 0.2s ease;
		}

		/* Header */
		.landuse-header {
			font-size: 16px;
			font-weight: 600;
			margin-bottom: 10px;
			color: #333;
		}

		/* Select dropdown */
		.landuse-select {
			width: 100%;
			padding: 8px 10px;
			font-size: 14px;
			border-radius: 4px;
			border: 1px solid #ccc;
			appearance: none;
			margin-bottom: 12px;
			background: #f9f9f9;
		}

		/* Button */
		.landuse-close {
			display: inline-block;
			padding: 8px 14px;
			font-size: 14px;
			background: #007bff;
			color: white;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			width: 100%;
			transition: background 0.2s ease;
		}

		.landuse-close:hover {
			background: #0056b3;
		}

		.landuse-header {
			cursor: move;
			user-select: none;
		}
	</style>

</head>

<body>
	<div class="l-container js-menu-toggle p-simulation">
		<header class="l-header">
			<div class="l-header__title js-menu-toggle" role="banner" aria-label="Digital Twin Sandbox Header">
				<span class="l-header__title-en" aria-hidden="true">DTSB</span>
				<h1 class="l-header__title-jp">Digital Twin Sandbox</h1>
			</div>
			<nav class="l-header__nav">
				<a href="#" class="l-header__nav-link logout js-menu-toggle"><span>ログアウト</span></a>
				<a href="./"
					class="l-header__nav-link simulation current js-menu-toggle js-menu-simulation"><span>シミュレーション</span></a>
				<a href="list.html" class="l-header__nav-link results js-menu-toggle"><span>結果一覧</span></a>
				<span class="l-header__nav-link menu js-menu-open js-menu-toggle"><span>メニューを閉じる</span></span>
			</nav>
		</header>
		<main class="l-contents">
			<header class="l-contents__head">
				<div class="breadcrumb-wrapper">
					<nav class="breadcrumb-arrow" aria-label="ページ階層">
						<ul>
							<li class="step"><a href="index.html" aria-current="page">入力</a></li>
							<li class="step"><a href="results.html">結果</a></li>
							<li class="step"><a href="list.html">結果一覧</a></li>
						</ul>
					</nav>
				</div>
				<h1 class="l-contents__tit">入力</h1>
				<button type="button" class="l-fixed__open l-contents__useful c-btn js-fixed-open" data-fixed="useful">
					便利機能
				</button>
			</header>
			<form class="l-contents__main column02" action="results.html">
				<input type="hidden" name="loading" value="true">
				<div class="l-contents__map">
					<div class="l-contents__map-load" id="map"></div>
					<span class="l-contents__map-mode js-route-mode">専用レーンモード</span>
					<div class="l-contents__map-data">
						<div class="scroll">
							<button type="button" class="c-btn__small c-btn__small-black legends u-hover-op js-legends">
								凡例
							</button>
							<dl class="l-contents__map-view">
								<dt>表示切替</dt>
								<dd>
									<label class="l-contents__map-btn">
										<input type="checkbox" id="data_root" name="data_root" checked>
										<span class="btn">路線</span>
									</label>
									<label class="l-contents__map-btn">
										<input type="checkbox" id="loadMeshToggle">
										<span class="btn">メッシュ表示</span>
									</label>

									<label class="l-contents__map-btn">
										<input type="checkbox" id="data_passengers" name="data_passengers">
										<span class="btn">乗降客数</span>
									</label>
									<label class="l-contents__map-btn">
										<input type="checkbox" id="toggleBusRoutes">
										<span class="btn">バス路線表示</span>
									</label>
									<label class="l-contents__map-btn">
										<input type="checkbox" id="toggleFacilityHeatmap" checked>
										<span class="btn">施設ヒートマップ</span>
									</label>
									<label class="l-contents__map-btn">
										<input type="checkbox" id="toggleImportantFacilities">
										<span class="btn">重要施設</span>
									</label>
								</dd>
							</dl>
							<div class="l-contents__map-population">
								<label class="l-contents__map-btn">
									<input type="checkbox" class="js-population" name="data_population">
									<span class="btn">人口推計</span>
								</label>
								<label class="l-contents__map-year">
									<span class="tit">年代</span>
									<div class="range-wrap">
										<div class="years u-en">
											<span class="min-value js-year-min">2015</span>
											<span class="current-value js-year-current">2025</span>
											<span class="max-value js-year-max">2050</span>
										</div>
										<div class="range-box">
											<input class="range js-year" type="range" name="data_year" value="2025"
												min="2015" max="2050" step="5" />
											<ul class="scale">
												<li class="min"></li>
												<li></li>
												<li></li>
												<li></li>
												<li></li>
												<li></li>
												<li></li>
												<li class="max"></li>
											</ul>
										</div>
									</div>
								</label>
							</div>
						</div>
						<div class="l-contents__map-legends js-legends-contents" style="display: none;">
							<i class="close js-legends-close"></i>
							<dl>
								<dt>人口推計</dt>
								<dd>
									<ul class="population">
										<li><span>0 - 10</span></li>
										<li><span>11 - 50</span></li>
										<li><span>51 - 100</span></li>
										<li><span>101 - 200</span></li>
										<li><span>201 - 300</span></li>
										<li><span>301 - 600</span></li>
										<li><span>601 - 1000</span></li>
										<li><span>1001 - 2000</span></li>
										<li><span>2001 - 5000</span></li>
										<li><span>5001 - 7000</span></li>
										<li><span>7001 以上</span></li>
									</ul>
								</dd>
							</dl>
						</div>
					</div>
				</div>
				<div class="l-contents__data">
					<div class="c-box c-box__route c-area__scroll">
						<dl class="c-route__setting l-contents__parameter">
							<dt style="font-size: 2.0rem; font-weight: bold;">パラメーター</dt>
							<dd class="c-input__radio">
								<label class="c-input__radio-label">
									<input type="radio" name="parameter_mode" value="現状" checked
										data-target=".js-parameter-content.current">現状
								</label>
								<label class="c-input__radio-label">
									<input type="radio" name="parameter_mode" value="シナリオ1"
										data-target=".js-parameter-content.scenario1">シナリオ1
								</label>
								<label class="c-input__radio-label">
									<input type="radio" name="parameter_mode" value="シナリオ2"
										data-target=".js-parameter-content.scenario2">シナリオ2
								</label>
							</dd>
						</dl>

						<div class="c-box__route-wrap">
							<!--現状-->
							<div class="c-box__route-content js-parameter-content current">
								<!--現状：路線A-->
								<details class="c-route c-details js-route" data-route="current_route_a" open>
									<summary class="c-details__summary">路線A</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio" name="current_a_brt"
													value="0" checked>無</label>
											<label class="c-input__radio-label"><input type="radio" name="current_a_brt"
													value="1">有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="current_a_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="current_a_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">

												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>

												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMin" min="0" max="1000" value="120"
														step="10" />
													<input type="range" id="fareRangeMax" min="0" max="1000" value="390"
														step="10" />
													<div class="range-bubble range-bubble-min" id="bubbleMin">
														120円<br>(±0)</div>
													<div class="range-bubble range-bubble-max" id="bubbleMax">
														390円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 25.5%;">120～390円</div>


													<i class="c-input__range-markforslider js-range-mark equal"></i>

												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="current_a_frequency">まとめてリセット</span></dt>
										<dd id="current_a_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_0609"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_0912"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_1518">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_a_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_a_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_a_frequency_21" value="2"
																data-saved="2" data-default="2" min="0" max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="current_a_lanes" class="js-route-lanes" value="0"
													checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="current_a_lanes" class="js-route-lanes" value="1">有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="current_a_platooning" value="0" checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="current_a_platooning" value="1">有</label>
										</dd>
									</dl>
								</details>
								<!--//現状：路線A-->
								<!--現状：路線B-->
								<details class="c-route c-details js-route" data-route="current_route_b">
									<summary class="c-details__summary">路線B</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio" name="current_b_brt"
													value="0" checked>無</label>
											<label class="c-input__radio-label"><input type="radio" name="current_b_brt"
													value="1">有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="current_b_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="current_b_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">
												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>
												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMinB" min="0" max="1000"
														value="120" step="10" />
													<input type="range" id="fareRangeMaxB" min="0" max="1000"
														value="390" step="10" />
													<div class="range-bubble range-bubble-min" id="bubbleMinB">
														120円<br>(±0)</div>
													<div class="range-bubble range-bubble-max" id="bubbleMaxB">
														390円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 25.5%;">120～390円</div>

													<i class="c-input__range-markforslider js-range-mark equal"></i>

												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="current_b_frequency">まとめてリセット</span></dt>
										<dd id="current_b_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_0609"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_0912"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_1518">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="current_b_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="current_b_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="current_b_frequency_21" value="2"
																data-saved="2" data-default="2" min="0" max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="current_b_lanes" class="js-route-lanes" value="0"
													checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="current_b_lanes" class="js-route-lanes" value="1">有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="current_b_platooning" value="0" checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="current_b_platooning" value="1">有</label>
										</dd>
									</dl>
								</details>
								<!--//現状：路線B-->
							</div>
							<!--//現状-->
							<!--シナリオ1-->
							<div class="c-box__route-content js-parameter-content">
								<!--シナリオ1：路線A-->
								<details class="c-route c-details js-route" data-route="scenario01_route_a" open>
									<summary class="c-details__summary">路線A</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_brt" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_brt" value="1" checked>有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario01_a_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="scenario01_a_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">
												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>

												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMin_scenario01a" min="0" max="1000"
														value="140" step="10" />
													<input type="range" id="fareRangeMax_scenario01a" min="0" max="1000"
														value="410" step="10" />

													<div class="range-bubble range-bubble-min"
														id="bubbleMin_scenario01a">140円<br>(±0)</div>
													<div class="range-bubble range-bubble-max"
														id="bubbleMax_scenario01a">410円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 27.5%;">140～410円</div>

													<i class="c-input__range-markforslider js-range-mark equal"></i>


												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario01_a_frequency">まとめてリセット</span></dt>
										<dd id="scenario01_a_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="4">4</span>
															<small class="js-range-diff" data-saved="(+2)">(+2)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_0609"
																value="4" data-saved="4" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="1">1</span>
															<small class="js-range-diff" data-saved="(-1)">(-1)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_0912"
																value="1" data-saved="1" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_1518">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_a_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_a_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_a_frequency_21"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_lanes" class="js-route-lanes" value="0"
													checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_lanes" class="js-route-lanes" value="1">有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_platooning" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_a_platooning" value="1" checked>有</label>
										</dd>
									</dl>
								</details>
								<!--//シナリオ1：路線A-->
								<!--シナリオ1：路線B-->
								<details class="c-route c-details js-route" data-route="scenario01_route_b">
									<summary class="c-details__summary">路線B</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_brt" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_brt" value="1" checked>有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario01_b_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="scenario01_b_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">
												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>

												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMin_scenario01b" min="0" max="1000"
														value="120" step="10" />
													<input type="range" id="fareRangeMax_scenario01b" min="0" max="1000"
														value="390" step="10" />

													<div class="range-bubble range-bubble-min"
														id="bubbleMin_scenario01b">120円<br>(±0)</div>
													<div class="range-bubble range-bubble-max"
														id="bubbleMax_scenario01b">390円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 25.5%;">120～390円</div>


													<i class="c-input__range-markforslider js-range-mark equal"></i>


												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario01_b_frequency">まとめてリセット</span></dt>
										<dd id="scenario01_b_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_0609"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_0912"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_1518">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario01_b_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario01_b_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario01_b_frequency_21"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_lanes" class="js-route-lanes" value="0"
													checked>無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_lanes" class="js-route-lanes" value="1">有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_platooning" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario01_b_platooning" value="1" checked>有</label>
										</dd>
									</dl>
								</details>
								<!--//シナリオ1：路線B-->
							</div>
							<!--//シナリオ1-->
							<!--シナリオ2-->
							<div class="c-box__route-content js-parameter-content">
								<!--シナリオ2：路線A-->
								<details class="c-route c-details js-route" data-route="scenario02_route_a" open>
									<summary class="c-details__summary">路線A</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_brt" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_brt" value="1" checked>有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario02_a_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="scenario02_a_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">
												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>

												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMin_scenario02a" min="0" max="1000"
														value="160" step="10" />
													<input type="range" id="fareRangeMax_scenario02a" min="0" max="1000"
														value="430" step="10" />

													<div class="range-bubble range-bubble-min"
														id="bubbleMin_scenario02a">160円<br>(±0)</div>
													<div class="range-bubble range-bubble-max"
														id="bubbleMax_scenario02a">430円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 29.5%;">160～430円</div>


													<i class="c-input__range-markforslider js-range-mark equal"></i>


												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario02_a_frequency">まとめてリセット</span></dt>
										<dd id="scenario02_a_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="6">6</span>
															<small class="js-range-diff" data-saved="(+4)">(+4)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_0609"
																value="6" data-saved="6" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="4">4</span>
															<small class="js-range-diff" data-saved="(+3)">(+3)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_0912"
																value="4" data-saved="4" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_1518">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_a_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_a_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_a_frequency_21"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_lanes" class="js-route-lanes" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_lanes" class="js-route-lanes" value="1"
													checked>有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_platooning" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_a_platooning" value="1" checked>有</label>
										</dd>
									</dl>
								</details>
								<!--//シナリオ2：路線A-->
								<!--シナリオ2：路線B-->
								<details class="c-route c-details js-route" data-route="scenario02_route_b">
									<summary class="c-details__summary">路線B</summary>
									<dl class="c-route__setting">
										<dt>BRT導入</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_brt" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_brt" value="1" checked>有</label>
										</dd>
										<dt class="fare-label">
											運賃
											<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario02_b_fare">
												リセット
											</span>
										</dt>
										<dd class="c-input__range" id="scenario02_b_fare">
											<span class="c-input__range-unit">運賃 (円)</span>
											<div class="c-input__range-container js-rangeforslider">
												<div class="c-input__range-minmax u-en">
													<span class="js-range-min">0</span>
													<span class="js-range-max">1000</span>
												</div>

												<div class="c-input__range-wrap dual">
													<input type="range" id="fareRangeMin_scenario02b" min="0" max="1000"
														value="120" step="10" />
													<input type="range" id="fareRangeMax_scenario02b" min="0" max="1000"
														value="390" step="10" />

													<div class="range-bubble range-bubble-min"
														id="bubbleMin_scenario02b">120円<br>(±0)</div>
													<div class="range-bubble range-bubble-max"
														id="bubbleMax_scenario02b">390円<br>(±0)</div>
													<div class="range-fixed-bubble" style="left: 25.5%;">120～390円</div>

													<i class="c-input__range-markforslider js-range-mark equal"></i>


												</div>
											</div>
										</dd>
										<dt>運航頻度<span class="c-btn__small c-btn__small-white reset js-reset"
												data-reset="scenario02_b_frequency">まとめてリセット</span></dt>
										<dd id="scenario02_b_frequency">
											<dl class="c-frequency">
												<dt class="c-frequency__hours">6～9時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_0609">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_0609">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_0609"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">9～12時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_0912">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_0912">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_0912"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">12～15時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_1215">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_1215">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_1215"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">15～18時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_1518">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_1518">
													<span class=" c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_1518"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">18～21時台<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_1821">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_1821">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_1821"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
												<dt class="c-frequency__hours">21時～<span
														class="c-btn__small c-btn__small-white reset js-reset"
														data-reset="scenario02_b_frequency_21">リセット</span></dt>
												<dd class="c-frequency__number c-input__range"
													id="scenario02_b_frequency_21">
													<span class="c-input__range-unit">台数(台)</span>
													<div class="c-input__range-container js-range">
														<span
															class="c-input__change c-input__range-change current-value u-en js-range-change">
															<span class="js-range-value" data-saved="2">2</span>
															<small class="js-range-diff" data-saved="(+0)">(+0)</small>
														</span>
														<div class="c-input__range-minmax u-en">
															<span class="js-range-min">0</span>
															<span class="js-range-max">10</span>
														</div>
														<div class="c-input__range-wrap">
															<input type="range" name="scenario02_b_frequency_21"
																value="2" data-saved="2" data-default="2" min="0"
																max="10"
																class="c-input__range-slider js-range-slider" />
															<i class="c-input__range-mark js-range-mark equal"></i>
														</div>
														<span
															class="c-input__saved c-input__range-saved u-en js-range-saved"></span>
													</div>
												</dd>
											</dl>
										</dd>
										<dt>専用レーン</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_lanes" class="js-route-lanes" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_lanes" class="js-route-lanes" value="1"
													checked>有</label>
										</dd>
										<dt>隊列走行</dt>
										<dd class="c-input__radio">
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_platooning" value="0">無</label>
											<label class="c-input__radio-label"><input type="radio"
													name="scenario02_b_platooning" value="1" checked>有</label>
										</dd>
									</dl>
								</details>
								<!--//シナリオ2：路線B-->
							</div>
							<!--//シナリオ2-->
						</div>
					</div>
					<div class="c-area__btns column02 js-btns" style="display: flex; flex-wrap: wrap; gap: 8px;">
						<button class="c-btn c-btn__contents blue" type="submit"
							style="flex: 1 1 auto; min-width: 150px;">
							シミュレーション結果
						</button>
						<label class="c-btn c-btn__contents blue"
							style="cursor: pointer; flex: 1 1 auto; min-width: 150px; position: relative;">
							<input type="file" id="folderUpload" webkitdirectory style="display: none;">
							<span id="folderUploadLabel">📁 Upload MATSim Folder</span>
							<span id="folderUploadSpinner" style="display: none; margin-left: 8px;">⏳</span>
						</label>

						<button id="toggleAnalysisBtn" type="button" class="c-btn c-btn__contents"
							style="flex: 0 0 auto; min-width: 150px;">
							▼ 解析パネルを開く
						</button>
					</div>

					<div id="analysisBlock" class="collapsible">
						<!-- Legend + status toolbar -->
						<div class="dtsb-toolbar">
							<div class="legend">
								<span>凡例:</span>
								<span><span class="dot" style="background:blue"></span> Home</span>
								<span><span class="dot" style="background:green"></span> Work</span>
								<span><span class="dot" style="background:orange"></span> Business</span>
								<span><span class="dot" style="background:purple"></span> Shopping</span>
								<span><span class="dot" style="background:gray"></span> pt interaction</span>
							</div>
							<!-- 🔎 Person filter + Export buttons -->
							<div style="display:flex; gap:8px; align-items:center; margin-left:auto;">
								<input id="personSearch" type="text" placeholder="Filter by personId (partial ok)"
									style="padding:6px 8px; font-size:12px; width:220px; border:1px solid #ccd5ff; border-radius:8px;">
								<button id="clearSearchBtn" type="button" class="btn ghost">Clear</button>
								<button id="exportSummaryBtn" type="button" class="btn">Export Summary CSV</button>
								<button id="exportStepsBtn" type="button" class="btn secondary">Export Steps CSV</button>
								<button id="genStoryBtn" type="button" class="btn">
									<span class="label">AIストーリー生成</span>
									<span class="spin" style="display:none; margin-left:6px;">⏳</span>
								</button>
							</div>

							<span class="status" id="statusMsg"></span>
						</div>

						<!-- Scoring + table panel (unchanged content) -->
						<div class="panel">
							<div class="card" style="flex:1 1 320px;">
								<h3>Scoring Weights（1秒あたりの重み）</h3>
								<div class="weights-grid">
									<label for="wHome">🏠 Home</label><input id="wHome" type="number" step="0.01"
										value="1.0" />
									<label for="wWork">💼 Work</label><input id="wWork" type="number" step="0.01"
										value="0.5" />
									<label for="wBusiness">🧾 Business</label><input id="wBusiness" type="number"
										step="0.01" value="0.3" />
									<label for="wShopping">🛍 Shopping</label><input id="wShopping" type="number"
										step="0.01" value="0.2" />
									<label for="wOtherAct">📍 Other Activity</label><input id="wOtherAct" type="number"
										step="0.01" value="0.1" />
									<label for="wCar">🚗 car</label><input id="wCar" type="number" step="0.01"
										value="-2.0" />
									<label for="wWalk">🚶 walk</label><input id="wWalk" type="number" step="0.01"
										value="0.5" />
									<label for="wPt">🚌 pt</label><input id="wPt" type="number" step="0.01"
										value="0.1" />
									<label for="wOtherLeg">🚦 other mode</label><input id="wOtherLeg" type="number"
										step="0.01" value="0.0" />
								</div>
								<div style="margin-top:8px; display:flex; gap:8px;">
									<button id="recomputeBtn" type="button" class="btn">Recompute Scores</button>
									<button id="clearMapBtn" type="button" class="btn secondary">Clear Map</button>
								</div>
								<div class="muted" style="margin-top:6px;">※
									サーバーは既定重みでもスコアを付与します。上記を変更するとフロント側で再計算して表示します。</div>
							</div>

							<div class="card" style="flex:2 1 520px;">
								<h3>Persons & Plans（selected=yes がデフォルト表示）</h3>
								<div class="table-wrap">
									<table id="plansTable">
										<thead>
											<tr>
												<th>Person</th>
												<th>MATSim Score (Plan)</th>
												<th>Our Score</th>
												<th>Selected</th>
												<th>Plans</th>
												<th>Actions</th>
											</tr>
										</thead>
										<tbody></tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
	</div>
	</div>
	</form>
	</main>
	<form class="l-fixed js-fixed" id="useful" action="./">
		<div class="l-fixed__box js-fixed-box">
			<h2 class="l-contents__tit l-fixed__tit">便利機能</h2>
			<dl class="l-fixed__setting">
				<dt class="center">外部データ読み込み</dt>
				<dd><input name="useful_file" class="c-input__file" type="file"></dd>
				<dt>⼟地利⽤予測</dt>
				<dd></dd>
				<dt>⼈⼝推計</dt>
				<dd></dd>
				<dt>感度分析</dt>
				<dd></dd>
				<dt>デフォルト値セット</dt>
				<dd></dd>
			</dl>
			<div class="c-area__btns column02 l-fixed__btns wide">
				<button class="c-btn c-btn__contents" type="submit">設定を保存する</button>
				<span class="c-btn c-btn__contents blue l-fixed__close js-fixed-close">便利機能を閉じる</span>
			</div>
		</div>
		<div class="l-fixed__bg js-fixed-close"></div>
	</form>
	</div>
	<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->
	<script src="assets/js/jszip.min.js"></script>
	<script src="assets/js/leaflet/leaflet.js"></script>
	<script src="assets/js/common.js"></script>
	<script src="assets/js/map.js"></script>
	<script src="assets/js/simulation.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/proj4@2.19.7/dist/proj4.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
	<script src="app.js" defer></script>
	<script src="https://cdn.jsdelivr.net/npm/@turf/turf@6.5.0/turf.min.js"></script>
	<script src="landuse.js" defer></script>

	<script>
		const fareMinA = document.getElementById('fareRangeMin');
		const fareMaxA = document.getElementById('fareRangeMax');
		const rangeMarkA = document.querySelector('#current_a_fare .js-range-mark');

		const bubbleMin = document.getElementById('bubbleMin');
		const bubbleMax = document.getElementById('bubbleMax');
		const defaultMin = 120;
		const defaultMax = 390;

		function setBubblePosition(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiff(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubbles(minVal, maxVal) {
			bubbleMin.innerHTML = `${minVal}円<br>${formatDiff(minVal, defaultMin)}`;
			bubbleMax.innerHTML = `${maxVal}円<br>${formatDiff(maxVal, defaultMax)}`;

			setBubblePosition(fareMinA, bubbleMin);
			setBubblePosition(fareMaxA, bubbleMax);
		}

		function updateVisualA(minVal, maxVal) {
			const total = +fareMinA.max - +fareMinA.min;
			const pctMin = ((minVal - +fareMinA.min) / total) * 100;
			const pctMax = ((maxVal - +fareMinA.min) / total) * 100;

			rangeMarkA.style.left = pctMin + '%';
			rangeMarkA.style.width = (pctMax - pctMin) + '%';
		}

		function syncSlidersA() {
			let minV = +fareMinA.value, maxV = +fareMaxA.value;

			if (minV > maxV) {
				minV = maxV;
				fareMinA.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMaxA.value = maxV;
			}

			updateVisualA(minV, maxV);
			updateBubbles(minV, maxV);
		}

		fareMinA.addEventListener('input', syncSlidersA);
		fareMaxA.addEventListener('input', syncSlidersA);

		fareMinA.addEventListener('pointerdown', () => {
			fareMinA.style.zIndex = 3;
			fareMaxA.style.zIndex = 2;
		});
		fareMaxA.addEventListener('pointerdown', () => {
			fareMaxA.style.zIndex = 3;
			fareMinA.style.zIndex = 2;
		});

		fareMinA.value = 120;
		fareMaxA.value = 390;
		syncSlidersA();

		document.querySelector('[data-reset="current_a_fare"]').addEventListener('click', () => {
			fareMinA.value = defaultMin;
			fareMaxA.value = defaultMax;
			syncSlidersA();
		});

	</script>

	<script>
		const fareMinB = document.getElementById('fareRangeMinB');
		const fareMaxB = document.getElementById('fareRangeMaxB');
		const rangeMarkB = document.querySelector('#current_b_fare .js-range-mark');

		const bubbleMinB = document.getElementById('bubbleMinB');
		const bubbleMaxB = document.getElementById('bubbleMaxB');
		const defaultMinB = 120;
		const defaultMaxB = 390;

		function setBubblePositionB(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiffB(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubblesB(minVal, maxVal) {
			bubbleMinB.innerHTML = `${minVal}円<br>${formatDiffB(minVal, defaultMinB)}`;
			bubbleMaxB.innerHTML = `${maxVal}円<br>${formatDiffB(maxVal, defaultMaxB)}`;
			setBubblePositionB(fareMinB, bubbleMinB);
			setBubblePositionB(fareMaxB, bubbleMaxB);
		}

		function updateVisualB(minVal, maxVal) {
			const total = +fareMinB.max - +fareMinB.min;
			const pctMin = ((minVal - +fareMinB.min) / total) * 100;
			const pctMax = ((maxVal - +fareMinB.min) / total) * 100;

			rangeMarkB.style.left = pctMin + '%';
			rangeMarkB.style.width = (pctMax - pctMin) + '%';
		}

		function syncSlidersB() {
			let minV = +fareMinB.value, maxV = +fareMaxB.value;
			if (minV > maxV) {
				minV = maxV;
				fareMinB.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMaxB.value = maxV;
			}
			updateVisualB(minV, maxV);
			updateBubblesB(minV, maxV);
		}

		fareMinB.addEventListener('input', syncSlidersB);
		fareMaxB.addEventListener('input', syncSlidersB);

		fareMinB.addEventListener('pointerdown', () => {
			fareMinB.style.zIndex = 3;
			fareMaxB.style.zIndex = 2;
		});
		fareMaxB.addEventListener('pointerdown', () => {
			fareMaxB.style.zIndex = 3;
			fareMinB.style.zIndex = 2;
		});

		fareMinB.value = defaultMinB;
		fareMaxB.value = defaultMaxB;
		syncSlidersB();

		document.querySelector('[data-reset="current_b_fare"]').addEventListener('click', () => {
			fareMinB.value = defaultMinB;
			fareMaxB.value = defaultMaxB;
			syncSlidersB();
		});
	</script>

	<script>
		const fareMin_s01a = document.getElementById('fareRangeMin_scenario01a');
		const fareMax_s01a = document.getElementById('fareRangeMax_scenario01a');
		const rangeMark_s01a = document.querySelector('#scenario01_a_fare .js-range-mark');

		const bubbleMin_s01a = document.getElementById('bubbleMin_scenario01a');
		const bubbleMax_s01a = document.getElementById('bubbleMax_scenario01a');

		const defaultMin_s01a = 140;
		const defaultMax_s01a = 410;

		function setBubblePos_s01a(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiff_s01a(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubbles_s01a(minVal, maxVal) {
			bubbleMin_s01a.innerHTML = `${minVal}円<br>${formatDiff_s01a(minVal, defaultMin_s01a)}`;
			bubbleMax_s01a.innerHTML = `${maxVal}円<br>${formatDiff_s01a(maxVal, defaultMax_s01a)}`;
			setBubblePos_s01a(fareMin_s01a, bubbleMin_s01a);
			setBubblePos_s01a(fareMax_s01a, bubbleMax_s01a);
		}

		function updateVisual_s01a(minVal, maxVal) {
			const total = +fareMin_s01a.max - +fareMin_s01a.min;
			const pctMin = ((minVal - +fareMin_s01a.min) / total) * 100;
			const pctMax = ((maxVal - +fareMin_s01a.min) / total) * 100;

			rangeMark_s01a.style.left = pctMin + '%';
			rangeMark_s01a.style.width = (pctMax - pctMin) + '%';
		}

		function syncSliders_s01a() {
			let minV = +fareMin_s01a.value, maxV = +fareMax_s01a.value;
			if (minV > maxV) {
				minV = maxV;
				fareMin_s01a.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMax_s01a.value = maxV;
			}
			updateVisual_s01a(minV, maxV);
			updateBubbles_s01a(minV, maxV);
		}

		fareMin_s01a.addEventListener('input', syncSliders_s01a);
		fareMax_s01a.addEventListener('input', syncSliders_s01a);

		fareMin_s01a.addEventListener('pointerdown', () => {
			fareMin_s01a.style.zIndex = 3;
			fareMax_s01a.style.zIndex = 2;
		});
		fareMax_s01a.addEventListener('pointerdown', () => {
			fareMax_s01a.style.zIndex = 3;
			fareMin_s01a.style.zIndex = 2;
		});

		fareMin_s01a.value = defaultMin_s01a;
		fareMax_s01a.value = defaultMax_s01a;
		syncSliders_s01a();

		document.querySelector('[data-reset="scenario01_a_fare"]').addEventListener('click', () => {
			fareMin_s01a.value = defaultMin_s01a;
			fareMax_s01a.value = defaultMax_s01a;
			syncSliders_s01a();
		});
	</script>

	<script>
		const fareMin_s01b = document.getElementById('fareRangeMin_scenario01b');
		const fareMax_s01b = document.getElementById('fareRangeMax_scenario01b');
		const rangeMark_s01b = document.querySelector('#scenario01_b_fare .js-range-mark');

		const bubbleMin_s01b = document.getElementById('bubbleMin_scenario01b');
		const bubbleMax_s01b = document.getElementById('bubbleMax_scenario01b');

		const defaultMin_s01b = 120;
		const defaultMax_s01b = 390;

		function setBubblePos_s01b(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiff_s01b(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubbles_s01b(minVal, maxVal) {
			bubbleMin_s01b.innerHTML = `${minVal}円<br>${formatDiff_s01b(minVal, defaultMin_s01b)}`;
			bubbleMax_s01b.innerHTML = `${maxVal}円<br>${formatDiff_s01b(maxVal, defaultMax_s01b)}`;
			setBubblePos_s01b(fareMin_s01b, bubbleMin_s01b);
			setBubblePos_s01b(fareMax_s01b, bubbleMax_s01b);
		}

		function updateVisual_s01b(minVal, maxVal) {
			const total = +fareMin_s01b.max - +fareMin_s01b.min;
			const pctMin = ((minVal - +fareMin_s01b.min) / total) * 100;
			const pctMax = ((maxVal - +fareMin_s01b.min) / total) * 100;

			rangeMark_s01b.style.left = pctMin + '%';
			rangeMark_s01b.style.width = (pctMax - pctMin) + '%';
		}

		function syncSliders_s01b() {
			let minV = +fareMin_s01b.value, maxV = +fareMax_s01b.value;

			if (minV > maxV) {
				minV = maxV;
				fareMin_s01b.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMax_s01b.value = maxV;
			}

			updateVisual_s01b(minV, maxV);
			updateBubbles_s01b(minV, maxV);
		}

		fareMin_s01b.addEventListener('input', syncSliders_s01b);
		fareMax_s01b.addEventListener('input', syncSliders_s01b);

		fareMin_s01b.addEventListener('pointerdown', () => {
			fareMin_s01b.style.zIndex = 3;
			fareMax_s01b.style.zIndex = 2;
		});
		fareMax_s01b.addEventListener('pointerdown', () => {
			fareMax_s01b.style.zIndex = 3;
			fareMin_s01b.style.zIndex = 2;
		});

		fareMin_s01b.value = defaultMin_s01b;
		fareMax_s01b.value = defaultMax_s01b;
		syncSliders_s01b();

		document.querySelector('[data-reset="scenario01_b_fare"]').addEventListener('click', () => {
			fareMin_s01b.value = defaultMin_s01b;
			fareMax_s01b.value = defaultMax_s01b;
			syncSliders_s01b();
		});
	</script>


	<script>
		const fareMin_s02a = document.getElementById('fareRangeMin_scenario02a');
		const fareMax_s02a = document.getElementById('fareRangeMax_scenario02a');
		const rangeMark_s02a = document.querySelector('#scenario02_a_fare .js-range-mark');

		const bubbleMin_s02a = document.getElementById('bubbleMin_scenario02a');
		const bubbleMax_s02a = document.getElementById('bubbleMax_scenario02a');

		const defaultMin_s02a = 160;
		const defaultMax_s02a = 430;

		function setBubblePos_s02a(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiff_s02a(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubbles_s02a(minVal, maxVal) {
			bubbleMin_s02a.innerHTML = `${minVal}円<br>${formatDiff_s02a(minVal, defaultMin_s02a)}`;
			bubbleMax_s02a.innerHTML = `${maxVal}円<br>${formatDiff_s02a(maxVal, defaultMax_s02a)}`;
			setBubblePos_s02a(fareMin_s02a, bubbleMin_s02a);
			setBubblePos_s02a(fareMax_s02a, bubbleMax_s02a);
		}

		function updateVisual_s02a(minVal, maxVal) {
			const total = +fareMin_s02a.max - +fareMin_s02a.min;
			const pctMin = ((minVal - +fareMin_s02a.min) / total) * 100;
			const pctMax = ((maxVal - +fareMin_s02a.min) / total) * 100;

			rangeMark_s02a.style.left = pctMin + '%';
			rangeMark_s02a.style.width = (pctMax - pctMin) + '%';
		}

		function syncSliders_s02a() {
			let minV = +fareMin_s02a.value, maxV = +fareMax_s02a.value;

			if (minV > maxV) {
				minV = maxV;
				fareMin_s02a.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMax_s02a.value = maxV;
			}

			updateVisual_s02a(minV, maxV);
			updateBubbles_s02a(minV, maxV);
		}

		fareMin_s02a.addEventListener('input', syncSliders_s02a);
		fareMax_s02a.addEventListener('input', syncSliders_s02a);

		fareMin_s02a.addEventListener('pointerdown', () => {
			fareMin_s02a.style.zIndex = 3;
			fareMax_s02a.style.zIndex = 2;
		});
		fareMax_s02a.addEventListener('pointerdown', () => {
			fareMax_s02a.style.zIndex = 3;
			fareMin_s02a.style.zIndex = 2;
		});

		fareMin_s02a.value = defaultMin_s02a;
		fareMax_s02a.value = defaultMax_s02a;
		syncSliders_s02a();

		document.querySelector('[data-reset="scenario02_a_fare"]').addEventListener('click', () => {
			fareMin_s02a.value = defaultMin_s02a;
			fareMax_s02a.value = defaultMax_s02a;
			syncSliders_s02a();
		});
	</script>

	<script>
		const fareMin_s02b = document.getElementById('fareRangeMin_scenario02b');
		const fareMax_s02b = document.getElementById('fareRangeMax_scenario02b');
		const rangeMark_s02b = document.querySelector('#scenario02_b_fare .js-range-mark');

		const bubbleMin_s02b = document.getElementById('bubbleMin_scenario02b');
		const bubbleMax_s02b = document.getElementById('bubbleMax_scenario02b');

		const defaultMin_s02b = 120;
		const defaultMax_s02b = 390;

		function setBubblePos_s02b(input, bubble) {
			const min = +input.min;
			const max = +input.max;
			const val = +input.value;
			const percent = ((val - min) / (max - min)) * 100;
			bubble.style.left = `${percent}%`;
		}

		function formatDiff_s02b(current, base) {
			const diff = current - base;
			return diff === 0 ? '(±0)' : (diff > 0 ? `(+${diff})` : `(${diff})`);
		}

		function updateBubbles_s02b(minVal, maxVal) {
			bubbleMin_s02b.innerHTML = `${minVal}円<br>${formatDiff_s02b(minVal, defaultMin_s02b)}`;
			bubbleMax_s02b.innerHTML = `${maxVal}円<br>${formatDiff_s02b(maxVal, defaultMax_s02b)}`;
			setBubblePos_s02b(fareMin_s02b, bubbleMin_s02b);
			setBubblePos_s02b(fareMax_s02b, bubbleMax_s02b);
		}

		function updateVisual_s02b(minVal, maxVal) {
			const total = +fareMin_s02b.max - +fareMin_s02b.min;
			const pctMin = ((minVal - +fareMin_s02b.min) / total) * 100;
			const pctMax = ((maxVal - +fareMin_s02b.min) / total) * 100;

			rangeMark_s02b.style.left = pctMin + '%';
			rangeMark_s02b.style.width = (pctMax - pctMin) + '%';
		}

		function syncSliders_s02b() {
			let minV = +fareMin_s02b.value, maxV = +fareMax_s02b.value;

			if (minV > maxV) {
				minV = maxV;
				fareMin_s02b.value = minV;
			}
			if (maxV < minV) {
				maxV = minV;
				fareMax_s02b.value = maxV;
			}

			updateVisual_s02b(minV, maxV);
			updateBubbles_s02b(minV, maxV);
		}

		fareMin_s02b.addEventListener('input', syncSliders_s02b);
		fareMax_s02b.addEventListener('input', syncSliders_s02b);

		fareMin_s02b.addEventListener('pointerdown', () => {
			fareMin_s02b.style.zIndex = 3;
			fareMax_s02b.style.zIndex = 2;
		});
		fareMax_s02b.addEventListener('pointerdown', () => {
			fareMax_s02b.style.zIndex = 3;
			fareMin_s02b.style.zIndex = 2;
		});

		fareMin_s02b.value = defaultMin_s02b;
		fareMax_s02b.value = defaultMax_s02b;
		syncSliders_s02b();

		document.querySelector('[data-reset="scenario02_b_fare"]').addEventListener('click', () => {
			fareMin_s02b.value = defaultMin_s02b;
			fareMax_s02b.value = defaultMax_s02b;
			syncSliders_s02b();
		});
	</script>


	<script>
		const scenarioButtons = document.querySelectorAll('input[name="parameter_mode"]');
		const scenarioContents = document.querySelectorAll('.js-parameter-content');

		scenarioButtons.forEach((btn, index) => {
			btn.addEventListener('change', () => {
				scenarioContents.forEach(content => content.classList.remove('current'));
				scenarioContents[index].classList.add('current');
			});
		});
	</script>
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const breadcrumbLinks = document.querySelectorAll('.breadcrumb-arrow a');
			breadcrumbLinks.forEach(link => {
				link.addEventListener('click', function (e) {
					e.preventDefault(); // Block navigation
				});
			});
		});
	</script>


	<div id="lane-popup" style="
    position: absolute;
    top: 300px;
    left: 40%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #8a2be2, #6a0dad);
    color: #f8f6ff;
    border: 1px solid #c8a2ff;
    padding: 14px 28px;
    border-radius: 14px;
    box-shadow: 0 10px 28px rgba(0, 0, 0, 0.2);
    display: none;
    z-index: 9999;
    font-size: 17px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-weight: 600;
    max-width: 90%;
    text-align: center;
    transition: opacity 0.3s ease, transform 0.3s ease;
">
		専用レーンを選択してください
	</div>

	<div id="landUseMenu" class="landuse-panel">
		<div class="landuse-header" id="landUseMenuHeader">用途選択</div>
		<select id="landUseSelect" class="landuse-select">
			<option value="">-- 種別を選択 --</option>
			<option value="park">🏞️ 公園</option>
			<option value="school">🏫 学校</option>
			<option value="shopping">🛍️ 商業施設</option>
			<option value="hospital">🏥 病院</option>
		</select>
		<button onclick="closeLandUseMenu()" class="landuse-close">閉じる</button>
	</div>

	<script>
		function makeDraggable(dragTarget, handle) {
			let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

			handle.onmousedown = dragMouseDown;

			function dragMouseDown(e) {
				e.preventDefault();
				pos3 = e.clientX;
				pos4 = e.clientY;

				document.onmouseup = closeDragElement;
				document.onmousemove = elementDrag;
			}

			function elementDrag(e) {
				e.preventDefault();

				pos1 = pos3 - e.clientX;
				pos2 = pos4 - e.clientY;

				pos3 = e.clientX;
				pos4 = e.clientY;

				const top = dragTarget.offsetTop - pos2;
				const left = dragTarget.offsetLeft - pos1;

				dragTarget.style.top = `${top}px`;
				dragTarget.style.left = `${left}px`;
			}

			function closeDragElement() {
				document.onmouseup = null;
				document.onmousemove = null;
			}
		}

		document.addEventListener("DOMContentLoaded", () => {
			const panel = document.getElementById("landUseMenu");
			const header = document.getElementById("landUseMenuHeader");

			if (panel && header) {
				makeDraggable(panel, header);
			}
		});

	</script>

	<script>
		(function () {
			const block = document.getElementById('analysisBlock');
			const btn = document.getElementById('toggleAnalysisBtn');
			if (!block || !btn) return;

			const MAX_VH = 60; // cap when open (adjust to taste)

			function applyOpenStyles() {
				// compute target height: min(content, cap)
				const capPx = Math.floor(window.innerHeight * (MAX_VH / 100));
				// temporarily remove maxHeight to read true scrollHeight
				const prev = block.style.maxHeight;
				block.style.maxHeight = 'none';
				const contentHeight = block.scrollHeight;
				const target = Math.min(contentHeight, capPx);

				block.style.maxHeight = target + 'px';
				block.classList.toggle('scroll', contentHeight > capPx); // allow internal scroll if capped
			}

			function setOpen(open) {
				if (open) {
					block.classList.add('open');
					applyOpenStyles();
					btn.textContent = '▲ 解析パネルを閉じる';
				} else {
					block.style.maxHeight = '0px';
					block.classList.remove('open', 'scroll');
					btn.textContent = '▼ 解析パネルを開く';
				}
				localStorage.setItem('analysisOpen', open ? '1' : '0');
			}

			// Recompute height on resize when open
			function handleResize() {
				if (block.classList.contains('open')) applyOpenStyles();
			}
			window.addEventListener('resize', handleResize);

			// Watch for content changes (e.g., after table renders) and reflow
			const mo = new MutationObserver(() => {
				if (block.classList.contains('open')) {
					// debounce a bit to let layout settle
					requestAnimationFrame(applyOpenStyles);
				}
			});
			mo.observe(block, { childList: true, subtree: true });

			// Toggle click
			btn.addEventListener('click', () => {
				const next = !block.classList.contains('open');
				setOpen(next);
			});

			// Restore previous state (default collapsed)
			const saved = localStorage.getItem('analysisOpen');
			const shouldOpen = saved === '1';
			requestAnimationFrame(() => setOpen(shouldOpen));

			// Optional: expose a manual hook you can call after rendering the table
			window.reflowAnalysisPanel = () => {
				if (block.classList.contains('open')) applyOpenStyles();
			};
		})();
	</script>

	<!-- libs -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.10.0/proj4.min.js"></script>


</body>

</html>